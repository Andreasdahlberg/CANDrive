dist: focal
language: c
git:
  depth: false
before_install:
- sudo apt-get update
- sudo apt-get -y install gcc-arm-none-eabi libnewlib-arm-none-eabi libnewlib-nano-arm-none-eabi
- sudo python3 -m pip install scons
before_script:
- git clone https://github.com/eerimoq/cantools.git
- cd cantools
- git checkout f42efa9bf8a9b6c7723d75df8f92a41f20f9c756
- sudo python setup.py install
- cd ..
script:
- scons -C firmware build-opencm3 -j2
- scons -C firmware build -j2
- sonar-scanner
notifications:
  email:
  - andreas.dahlberg90@gmail.com
addons:
  sonarcloud:
    organization: "andreasdahlberg-github"
    token:
      secure: "HZp7Fs2ko2cqB42gDDPd1O8NPIGkEL/znLBc/0I9zwmuSYE3WcH3IYlXjx8dAVHggJ2WePe6A98dmEFIWQVfKuI7vtcOlYagKBMfOO8Ti8oUeEMXiphYCCUe7QBXBkWD3TA6hPETBcSI/GHaSSI31hjfSjhvtsNBiCiaQOwlyLdVOkY/GpkB071kYG6FWwJ6HdupoEminRI2f67ykn4GLl7i/9HtwkQF+bg9wjLJRMyIHCaZegUCQ4Ol4pdT/kHOCRyLICSmYapn3uNoDDnexP44JYeyL081fOHMA975lvh9+y+MLhEtHCxWKOZvRZysB5Kryu+rNYRt8FK7OKKcvqxo8CjmapTkv3yBvI1UAu6UCCGkE+myTqBPtNihNTQhtGISWPTr1NkQLgQN7IAdtjzfEXuxVmW/GXfUDw9Q21yeMddH+z0sIFJrNVgfY3CzbwDG1URvKtfF1gtWpbf+KI5SUFKI914CXPZPsLO7rjCYTCsFdMHL+sFH38EJLX8qoP29SpfoCwbG29lZp0oof1WeY3Np5XqPrOIvEJeWwJJYh6UUOzThpbZZWt32LUKbEXJIbtfjMKUAyMxbUlZrFk2D3YfIlW4Yxw1F9aI6os0bXiJsOeBnsvaJIzTSQkshFXthk5XkC0D24FkWtuu/C9dvFsmuJyZwYGmRhVgfsWQ="
